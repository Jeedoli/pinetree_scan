# ğŸŒ² Pinetree Scan: ì†Œë‚˜ë¬´ í”¼í•´ëª© AI íƒì§€ ì‹œìŠ¤í…œ

<p align="left">
  <img src="https://img.shields.io/badge/Python-3.10+-blue?logo=python" />
  <img src="https://img.shields.io/badge/YOLOv11s-ultralytics-yellowgreen?logo=github" />
  <img src="https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white" />
  <img src="https://img.shields.io/badge/Google%20Colab-F9AB00?logo=googlecolab&logoColor=white" />
  <img src="https://img.shields.io/badge/rasterio-%23007396.svg?logo=python&logoColor=white" />
  <img src="https://img.shields.io/badge/mAP-0.7+-success" />
  <img src="https://img.shields.io/badge/Multi--Scale-Adaptive-orange" />
</p>

> **ë“œë¡ /í•­ê³µ ì´ë¯¸ì§€ì—ì„œ YOLOv11s + ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ë¡œ ì†Œë‚˜ë¬´ í”¼í•´ëª©ì„ ìë™ íƒì§€í•˜ê³ , GPS ì¢Œí‘œë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•˜ëŠ” AI ê¸°ë°˜ ê³µê°„ì •ë³´ ì‹œìŠ¤í…œ**

---

## ğŸš€ ì£¼ìš” íŠ¹ì§•

- ğŸ¯ **ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤**: GPS ë°€ë„ ê¸°ë°˜ìœ¼ë¡œ 16~128px í¬ê¸° ìë™ ì¡°ì ˆ
- ğŸ§  **ì§€ëŠ¥í˜• ë°ì´í„° ìƒì„±**: í”¼í•´ëª© ë¶„í¬ì— ë”°ë¥¸ ì ì‘ì  ë¼ë²¨ í¬ê¸° ê²°ì •
- ğŸŒ **Google Colab ì™„ë²½ ì§€ì›**: í´ë¼ìš°ë“œ GPUë¡œ ë¬´ë£Œ í•™ìŠµ í™˜ê²½ ì œê³µ
- ğŸ”¥ **FastAPI REST API**: ëŒ€ìš©ëŸ‰ íŒŒì¼(2GB) ì§€ì›, Swagger UI ìë™ ë¬¸ì„œí™”
- ğŸ“Š **ë‹¤ì¤‘ ì§€ì—­ ë°ì´í„°ì…‹ ë³‘í•©**: ì—¬ëŸ¬ ì§€ì—­ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ robustí•œ ëª¨ë¸ í•™ìŠµ
- ğŸ—ºï¸ **ì •ë°€ GPS ë³€í™˜**: GeoTIFF ê³µê°„ì •ë³´ ê¸°ë°˜ ìœ„ê²½ë„ ì¢Œí‘œ ìë™ ë³€í™˜
- ğŸ“ˆ **ê°œì„ ëœ ì„±ëŠ¥**: ìºì‹œ ë²„ê·¸ ìˆ˜ì • ë° ë©€í‹°ìŠ¤ì¼€ì¼ë¡œ mAP 0.7+ ë‹¬ì„±

---

## ğŸ§° ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **AI ëª¨ë¸** | YOLOv11s, Ultralytics, PyTorch |
| **í´ë¼ìš°ë“œ í•™ìŠµ** | Google Colab, GPU T4/V100 |
| **API ì„œë²„** | FastAPI, Uvicorn, Swagger UI |
| **ê³µê°„ì •ë³´** | rasterio, pyproj, GDAL |
| **ë°ì´í„°** | pandas, numpy, OpenCV |
| **ğŸ¤– RAG ì‹œìŠ¤í…œ** | OpenAI GPT-4o-mini, LangChain, FAISS |
| **Knowledge Base** | PDF/MD/CSV ë¬¸ì„œ ê²€ìƒ‰, Semantic Search |

---

## ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
pinetree_scan/
â”œâ”€â”€ ğŸ“Š notebooks/
â”‚   â””â”€â”€ YOLOv11s_Smart_Training.ipynb    # Google Colab í•™ìŠµ ë…¸íŠ¸ë¶
â”œâ”€â”€ ğŸš€ api/                              # FastAPI ì„œë²„
â”‚   â”œâ”€â”€ main.py                          # API ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ config.py                        # API ì„¤ì • (conf=0.16, iou=0.45)
â”‚   â”œâ”€â”€ rag_system.py                    # ğŸ¤– RAG í•µì‹¬ ì—”ì§„ (Knowledge Base + OpenAI)
â”‚   â””â”€â”€ routers/                         # API ì—”ë“œí¬ì¸íŠ¸
â”‚       â”œâ”€â”€ inference.py                 # í”¼í•´ëª© íƒì§€ API
â”‚       â”œâ”€â”€ preprocessing.py             # ë©€í‹°ìŠ¤ì¼€ì¼ ë°ì´í„° ì „ì²˜ë¦¬ API
â”‚       â”œâ”€â”€ visualization.py             # ê²°ê³¼ ì‹œê°í™” API
â”‚       â”œâ”€â”€ model_performance.py         # ëª¨ë¸ ì„±ëŠ¥ í‰ê°€ API
â”‚       â””â”€â”€ ai_analysis.py               # ğŸ¤– RAG ì±—ë´‡ API
â”œâ”€â”€ ğŸ¤– models/                           # í•™ìŠµëœ ëª¨ë¸
â”‚   â””â”€â”€ colab_yolo/best.pt              # YOLOv11s íƒì§€ ëª¨ë¸
â”œâ”€â”€ ğŸ“š knowledge_base/                   # RAG ì§€ì‹ ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ *.pdf                            # ë…¼ë¬¸ (ë¬´ì¸í•­ê³µê¸° ë”¥ëŸ¬ë‹ íƒì§€)
â”‚   â”œâ”€â”€ *.md                             # ê°€ì´ë“œ (ì‹ ë¢°ë„ë³„ ì²˜ë¦¬ë°©ì•ˆ, GPS ë°©ì œ)
â”‚   â”œâ”€â”€ *.csv                            # ë°ì´í„° (ì§€ì—­ë³„ íƒì§€í˜„í™©)
â”‚   â””â”€â”€ *.json                           # ì„¤ì • (ì‚°ë¦¼ê´€ë¦¬ ë§¤ë‰´ì–¼)
â”œâ”€â”€ ğŸ“ data/
â”‚   â”œâ”€â”€ api_outputs/                     # API ê²°ê³¼ ì €ì¥ì†Œ
â”‚   â””â”€â”€ training_data/                   # í•™ìŠµ ë°ì´í„°
â””â”€â”€ ğŸ“ˆ results/                          # í•™ìŠµ ê²°ê³¼

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ğŸŒ² Pinetree Scan Architecture

ğŸ“¡ ë°ì´í„° ìˆ˜ì§‘
â”œâ”€â”€ ğŸ›°ï¸ GeoTIFF (í•­ê³µì´ë¯¸ì§€)
â”œâ”€â”€ ğŸ“ GPS ì¢Œí‘œ (CSV)  
â””â”€â”€ ğŸ—ºï¸ ì§€ë¦¬ì°¸ì¡° (TFW)
      â†“
ğŸ§  ë©€í‹°ìŠ¤ì¼€ì¼ ì „ì²˜ë¦¬
â”œâ”€â”€ GPS ë°€ë„ ë¶„ì„ (50px ë°˜ê²½)
â”œâ”€â”€ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ (16~128px)
â””â”€â”€ íƒ€ì¼ ë¶„í•  + ë¼ë²¨ ìƒì„±
      â†“  
ğŸ¤– YOLOv11s í•™ìŠµ
â”œâ”€â”€ Google Colab (ë¬´ë£Œ GPU)
â”œâ”€â”€ ë‹¤ì¤‘ ì§€ì—­ ë°ì´í„°ì…‹ ë³‘í•©
â””â”€â”€ ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
      â†“
ğŸš€ FastAPI ì¶”ë¡  ì„œë²„
â”œâ”€â”€ ë°°ì¹˜ íƒì§€ (conf=0.16, iou=0.45)
â”œâ”€â”€ GPS ì¢Œí‘œ ë³€í™˜
â”œâ”€â”€ ì‹œê°í™” ê²°ê³¼ ìƒì„±
â””â”€â”€ ğŸ¤– RAG ì±—ë´‡ (Knowledge Base + OpenAI)
      â†“
ğŸ¤– AI ì§€ì‹ ê¸°ë°˜ ì±—ë´‡
â”œâ”€â”€ FAISS Semantic Search
â”œâ”€â”€ 8ê°œ ì „ë¬¸ ë¬¸ì„œ ê²€ìƒ‰
â”œâ”€â”€ OpenAI GPT-4o-mini ë‹µë³€ ìƒì„±
â””â”€â”€ ì†Œë‚˜ë¬´ í”¼í•´ëª© ì „ë¬¸ ìƒë‹´
```

---

## ğŸ¤– AI ì§€ì‹ ê¸°ë°˜ ì±—ë´‡ (RAG System)

### ğŸ“š ì£¼ìš” ê¸°ëŠ¥

**Knowledge Base ê¸°ë°˜ ì „ë¬¸ ìƒë‹´ ì‹œìŠ¤í…œ**
- âœ… **8ê°œ ì „ë¬¸ ë¬¸ì„œ**: PDF ë…¼ë¬¸, ì²˜ë¦¬ ê°€ì´ë“œ, GPS ë°©ì œ ê³„íš, ìƒíƒœ íŠ¹ì„± ë“±
- ğŸ” **FAISS Semantic Search**: ì§ˆë¬¸ê³¼ ê´€ë ¨ëœ ë¬¸ì„œ ìë™ ê²€ìƒ‰
- ğŸ¤– **OpenAI GPT-4o-mini**: ê²€ìƒ‰ëœ ì§€ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ë‹µë³€ ìƒì„±
- ğŸ‡°ğŸ‡· **ì™„ë²½í•œ í•œêµ­ì–´ ì§€ì›**: ì „ë¬¸ ìš©ì–´ë„ ì‰½ê²Œ ì„¤ëª…

### ğŸ¯ ì‚¬ìš© ì˜ˆì‹œ

```python
# API í˜¸ì¶œ
import requests

url = "http://localhost:8000/api/v1/ai-analysis/simple-chat"
response = requests.post(url, data={
    "question": "ë“œë¡ ìœ¼ë¡œ ì´¬ì˜í•œ ì¬ì„ ì¶© íƒì§€ì—ì„œ mAPê°€ ì–¼ë§ˆë‚˜ ë‚˜ì™€ì•¼ í˜„ì—…ì—ì„œ ì“¸ ìˆ˜ ìˆì„ê¹Œ?"
})

print(response.json()["ai_answer"])
# ì¶œë ¥: "ì¼ë°˜ì ìœ¼ë¡œ mAP ê°’ì´ 0.5 ì´ìƒì´ë©´ í˜„ì—…ì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ìœ¼ë¡œ
#       ê°„ì£¼ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê³ ì‹ ë¢°ë„ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” 0.7 ì´ìƒì˜ mAP ê°’ì„
#       ëª©í‘œë¡œ í•˜ëŠ” ê²ƒì´ ì´ìƒì ì…ë‹ˆë‹¤..."
```

### ğŸ’¬ ì§ˆë¬¸ ì˜ˆì‹œ

- **YOLO ëª¨ë¸**: "YOLOê°€ ë­ì•¼?", "mAP 70% ì´ìƒì´ë©´ í˜„ì—…ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•´?"
- **ì†Œë‚˜ë¬´ì¬ì„ ì¶©ë³‘**: "ì¬ì„ ì¶©ë³‘ ì´ˆê¸° ì¦ìƒì€?", "í™•ì‚° íŒ¨í„´ì€ ì–´ë–»ê²Œ ë¼?"
- **íƒì§€ ì‹œìŠ¤í…œ**: "ë“œë¡  íƒì§€ ì •í™•ë„ë¥¼ ë†’ì´ëŠ” ë°©ë²•ì€?", "ì‹ ë¢°ë„ 80% ì´ìƒì€ ì–´ë–»ê²Œ ì²˜ë¦¬í•´?"
- **ì‹¤ì œ ë°ì´í„°**: "ê²½ë‚¨ ì°½ì› íƒì§€ ê²°ê³¼ëŠ”?", "GPS ì¢Œí‘œ ê¸°ë°˜ ë°©ì œ ê³„íšì€?"

### ğŸ—ï¸ RAG ì‹œìŠ¤í…œ êµ¬ì¡°

```
ì§ˆë¬¸ ì…ë ¥
    â†“
ğŸ” FAISS Semantic Search (84ê°œ ì²­í¬)
    â†“
ğŸ“„ ê´€ë ¨ ë¬¸ì„œ 3ê°œ ì¶”ì¶œ (PDF/MD/CSV)
    â†“
ğŸ¤– OpenAI GPT-4o-mini (ì§€ì‹ + ì§ˆë¬¸)
    â†“
âœ… ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ë‹µë³€
```

### ğŸ“Š Knowledge Base í˜„í™©

| íŒŒì¼ | íƒ€ì… | í¬ê¸° | ë‚´ìš© |
|------|------|------|------|
| ë¬´ì¸í•­ê³µê¸°...íƒì§€.pdf | PDF | 24,767ì | YOLO ì•„í‚¤í…ì²˜, ë”¥ëŸ¬ë‹ íƒì§€ í•™ìˆ  ë…¼ë¬¸ |
| ì‹ ë¢°ë„ë³„_ì²˜ë¦¬ë°©ì•ˆ.md | MD | 610ì | 70% ì´ìƒ ì¦‰ì‹œ ë°©ì œ, 40-70% ì¬ì¡°ì‚¬ |
| GPSì¢Œí‘œ_ê¸°ë°˜_ë°©ì œê³„íš.md | MD | 1,993ì | í´ëŸ¬ìŠ¤í„°ë§, ìš°ì„ ìˆœìœ„ ê²°ì • |
| ì†Œë‚˜ë¬´ì¬ì„ ì¶©ë³‘_ìƒíƒœí•™ì íŠ¹ì„±.md | MD | 1,421ì | í™•ì‚° ê±°ë¦¬ 500m-1km, í™•ì‚° íŒ¨í„´ |
| ì§€ì—­ë³„_íƒì§€í˜„í™©.csv | CSV | 444ì | ê²½ë‚¨/ê²½ë¶ ì‹¤ì œ íƒì§€ ë°ì´í„° |
| ì‚°ë¦¼ê´€ë¦¬_ë§¤ë‰´ì–¼.json | JSON | 1,475ì | ê³ ìœ„í—˜ 80%+, ì¤‘ìœ„í—˜ 60-79% ê¸°ì¤€ |
| í”„ë¡œì íŠ¸_ì„¤ì •.json | JSON | 2,203ì | ì‹ ë¢°ë„ ì„ê³„ê°’, ë°°ì¹˜ í¬ê¸° ë“± |
| ì‚°ë¦¼ë³‘í•´_ì¶”ê°€ì •ë³´.txt | TXT | 280ì | ë¹ ë¥¸ í™•ì‚°, ì¹˜ë£Œ ë¶ˆê°€ íŠ¹ì„± |

**ì´ 33,193ê¸€ì**ì˜ ì „ë¬¸ ì§€ì‹ì´ RAG ì‹œìŠ¤í…œì— í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## âš¡ ë¹ ë¥¸ ì‹œì‘

### 1ï¸âƒ£ Google Colabì—ì„œ í•™ìŠµ
```python
# Google Colabì—ì„œ ì‹¤í–‰
!git clone https://github.com/your-repo/pinetree_scan.git
%cd pinetree_scan
!pip install ultralytics

# ë…¸íŠ¸ë¶ ì‹¤í–‰
# notebooks/YOLOv11s_Smart_Training.ipynb
```

### 2ï¸âƒ£ ë¡œì»¬ì—ì„œ API ì„œë²„ ì‹¤í–‰
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
poetry install

# API ì„œë²„ ì‹œì‘  
poetry run uvicorn api.main:app --reload

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
# http://localhost:8000/docs (Swagger UI)
# http://localhost:8000/redoc (ReDoc)
```
```

---


## ğŸ”¥ Google Colabìœ¼ë¡œ í•™ìŠµ

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/Jeedoli/pinetree_scan/blob/main/notebooks/YOLOv11s_Smart_Training.ipynb)

```python
# 1. ìœ„ ë§í¬ë¡œ Colab ë…¸íŠ¸ë¶ ì—´ê¸°
# 2. ëŸ°íƒ€ì„ â†’ GPU ì„¤ì •
# 3. 1ë‹¨ê³„ë¶€í„° 4ë‹¨ê³„ê¹Œì§€ ìˆœì°¨ ì‹¤í–‰
# 4. ìë™ìœ¼ë¡œ Google Driveì— ëª¨ë¸ ë°±ì—…
```

**Colab íŠ¹ì§•:**
- ğŸ†“ **ë¬´ë£Œ GPU**: T4/V100 GPU ë¬´ë£Œ ì‚¬ìš©
- ğŸ¤– **24px ìµœì í™”**: ê°œë³„ ë‚˜ë¬´ íƒì§€ íŠ¹í™”
- ğŸ“Š **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: í•™ìŠµ ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ í™•ì¸
- â˜ï¸ **ìë™ ë°±ì—…**: Google Drive ìë™ ì—°ë™

### ğŸŒ API ì„œë²„ ì‹¤í–‰

```bash
# 1. ì €ì¥ì†Œ í´ë¡  ë° ì˜ì¡´ì„± ì„¤ì¹˜
git clone https://github.com/Jeedoli/pinetree_scan.git
cd pinetree_scan
poetry install

# 2. API ì„œë²„ ì‹¤í–‰
poetry run uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload

# 3. ë¸Œë¼ìš°ì €ì—ì„œ API ë¬¸ì„œ í™•ì¸
# http://localhost:8000/docs (Swagger UI)
# http://localhost:8000/redoc (ReDoc)
```

---

## ğŸ“Š í•™ìŠµ ì„±ëŠ¥

| ëª¨ë¸ | mAP@0.5 | mAP@0.5:0.95 | Precision | Recall | íŠ¹ì§• |
|------|---------|--------------|-----------|--------|------|
| **YOLOv11s-ë©€í‹°ìŠ¤ì¼€ì¼** | **0.7+** | **0.6+** | **0.75+** | **0.72+** | ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ |
| YOLOv11s-ê³ ì •í¬ê¸° | 0.5 | 0.45 | 0.60 | 0.55 | 32px ê³ ì • (ì´ì „) |
| YOLOv8s-64px | 0.45 | 0.40 | 0.55 | 0.50 | ê¸°ì¡´ ë²„ì „ |

**ğŸ¯ ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ ì‹œìŠ¤í…œ:**
- **GPS ë°€ë„ ë¶„ì„**: 50px ë°˜ê²½ ë‚´ GPS í¬ì¸íŠ¸ ê°œìˆ˜ë¡œ ë°€ë„ ê³„ì‚°
- **ì ì‘ì  í¬ê¸° ê²°ì •**:
  - ğŸŒ² **ì™¸ë”´ í”¼í•´ëª©** (ë°€ë„ â‰¤1): 128px í° ë°”ìš´ë”©ë°•ìŠ¤
  - ï¿½ **ë‚®ì€ ë°€ë„** (ë°€ë„ â‰¤3): 96px ì¤‘ê°„ ë°”ìš´ë”©ë°•ìŠ¤  
  - ğŸŒ¿ **ì¤‘ê°„ ë°€ë„** (ë°€ë„ â‰¤6): 64px í‘œì¤€ ë°”ìš´ë”©ë°•ìŠ¤
  - ğŸƒ **ë†’ì€ ë°€ë„** (ë°€ë„ â‰¤10): 48px ì‘ì€ ë°”ìš´ë”©ë°•ìŠ¤
  - ğŸŒ± **ë°€ì§‘ ì§€ì—­** (ë°€ë„ >10): 16px ìµœì†Œ ë°”ìš´ë”©ë°•ìŠ¤

**ğŸ“ˆ ì„±ëŠ¥ ê°œì„  íš¨ê³¼:**
- ğŸ¯ **ìƒí™©ë³„ ìµœì í™”**: GPS ë°€ë„ì— ë”°ë¥¸ ë°”ìš´ë”©ë°•ìŠ¤ í¬ê¸° ìë™ ì¡°ì ˆ
- ï¿½ **ìºì‹œ ë²„ê·¸ ìˆ˜ì •**: ê° ì§€ë„ë³„ ë…ë¦½ì  GPS ì¢Œí‘œ ì²˜ë¦¬
- ğŸ“Š **ë°ì´í„° í’ˆì§ˆ í–¥ìƒ**: 1,155ê°œ íƒ€ì¼ (6ê°œ ì§€ì—­ í†µí•©)
- ğŸ›ï¸ **ìµœì í™”ëœ ì„¤ì •**: conf=0.16, iou=0.45ë¡œ ë¯¼ê°í•œ íƒì§€

---

## ğŸŒ FastAPI REST API

### ğŸ¯ ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

#### **ğŸ” í”¼í•´ëª© íƒì§€ API**
```http
POST /api/v1/inference/detect
Content-Type: multipart/form-data

# ì—…ë¡œë“œ: ì´ë¯¸ì§€ íŒŒì¼ë“¤ (ìµœëŒ€ 2GB)
# ê²°ê³¼: GPS ì¢Œí‘œê°€ í¬í•¨ëœ CSV íŒŒì¼
```

#### **âš™ï¸ ë©€í‹°ìŠ¤ì¼€ì¼ ë°ì´í„° ì „ì²˜ë¦¬ API**  
```http
POST /api/v1/preprocessing/create-dataset
Content-Type: multipart/form-data

# ì—…ë¡œë“œ: GeoTIFF + TFW + CSV
# ê²°ê³¼: ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ í•™ìŠµìš© ë°ì´í„°ì…‹ (ZIP)
# íŠ¹ì§•: GPS ë°€ë„ ê¸°ë°˜ìœ¼ë¡œ 16~128px í¬ê¸° ìë™ ì¡°ì ˆ
```

#### **ğŸ”— ë‹¤ì¤‘ ë°ì´í„°ì…‹ ë³‘í•© API**
```http
POST /api/v1/preprocessing/merge-datasets  
Content-Type: multipart/form-data

# ì—…ë¡œë“œ: ì—¬ëŸ¬ ì§€ì—­ì˜ ë°ì´í„°ì…‹ ZIP íŒŒì¼ë“¤
# ê²°ê³¼: í†µí•©ëœ ëŒ€ìš©ëŸ‰ í•™ìŠµ ë°ì´í„°ì…‹
# ì˜ˆì‹œ: 6ê°œ ì§€ì—­ â†’ 1,155ê°œ íƒ€ì¼ í†µí•©
```

#### **ğŸ“Š ê²°ê³¼ ì‹œê°í™” API**
```http
POST /api/v1/visualization/auto-detect-and-visualize
Content-Type: multipart/form-data

# ì—…ë¡œë“œ: ì´ë¯¸ì§€ íŒŒì¼
# ê²°ê³¼: ìë™ íƒì§€ + ë°”ìš´ë”©ë°•ìŠ¤ ì‹œê°í™” ì´ë¯¸ì§€
# ì„¤ì •: conf=0.16, iou=0.45 (ì´˜ì´˜í•œ í”¼í•´ëª© ê°œë³„ íƒì§€)
```

#### **ğŸ¤– AI ì§€ì‹ ê¸°ë°˜ ì±—ë´‡ API**
```http
POST /api/v1/ai-analysis/simple-chat
Content-Type: application/x-www-form-urlencoded

# ìš”ì²­: question=YOLOê°€ ë­ì•¼?
# ê²°ê³¼: Knowledge Base ê²€ìƒ‰ + OpenAI ë‹µë³€ ìƒì„±
# íŠ¹ì§•: 8ê°œ ì „ë¬¸ ë¬¸ì„œ ê¸°ë°˜, FAISS Semantic Search
```

### ğŸ“‹ API ì‚¬ìš© ì˜ˆì‹œ

```python
import requests

# ğŸ¯ í”¼í•´ëª© íƒì§€ API í˜¸ì¶œ (ìµœì í™”ëœ ì„¤ì •)
url = "http://localhost:8000/api/v1/inference/detect"
files = {"images_zip": open("forest_tiles.zip", "rb")}
data = {
    "confidence": 0.16,      # ë¯¼ê°í•œ íƒì§€
    "iou_threshold": 0.45,   # ì´˜ì´˜í•œ í”¼í•´ëª© ê°œë³„ íƒì§€
    "save_visualization": True
}

response = requests.post(url, files=files, data=data)
result = response.json()

print(f"íƒì§€ëœ í”¼í•´ëª©: {result['total_detections']}ê°œ")

# ğŸ§  ë©€í‹°ìŠ¤ì¼€ì¼ ë°ì´í„°ì…‹ ìƒì„± API í˜¸ì¶œ
url = "http://localhost:8000/api/v1/preprocessing/create-dataset" 
files = {
    "geotiff_file": open("forest_map.tif", "rb"),
    "tfw_file": open("forest_map.tfw", "rb"),
    "csv_file": open("gps_coordinates.csv", "rb")
}
data = {
    "tile_size": 512,        # íƒ€ì¼ í¬ê¸°
    "file_prefix": "region1" # íŒŒì¼ ì ‘ë‘ì‚¬
}

response = requests.post(url, files=files, data=data)
print("ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°ì´í„°ì…‹ ìƒì„± ì™„ë£Œ!")
print(f"ê²°ê³¼ íŒŒì¼: {result['csv_file']}")

# ğŸ¤– AI ì±—ë´‡ API í˜¸ì¶œ (RAG ì‹œìŠ¤í…œ)
url = "http://localhost:8000/api/v1/ai-analysis/simple-chat"
response = requests.post(url, data={
    "question": "ì†Œë‚˜ë¬´ì¬ì„ ì¶©ë³‘ íƒì§€ ë°©ë²•ì€?"
})
result = response.json()

print(f"ğŸ’¬ AI ë‹µë³€: {result['ai_answer']}")
print(f"ğŸ“š ì°¸ê³  ë¬¸ì„œ: {result['knowledge_sources_used']}ê°œ")
print(f"ğŸ¤– ëª¨ë¸: {result['model_info']['llm_model']}")
```

### ğŸ  API ì ‘ì† ì£¼ì†Œ
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc  
- **í—¬ìŠ¤ì²´í¬**: http://localhost:8000/health

---

## ğŸ“ Google Colab í•™ìŠµ ê°€ì´ë“œ

### ğŸ“‹ 4ë‹¨ê³„ í•™ìŠµ í”„ë¡œì„¸ìŠ¤

| ë‹¨ê³„ | ë‚´ìš© | ì†Œìš”ì‹œê°„ |
|------|------|----------|
| **1ë‹¨ê³„** | í™˜ê²½ ì„¤ì • + ZIP ë°ì´í„° ìë™ íƒì§€ | 5ë¶„ |
| **1.5ë‹¨ê³„** | ë°ì´í„° ì „ì²˜ë¦¬ + 24px ìµœì í™” | 10ë¶„ |
| **2ë‹¨ê³„** | YOLOv11s ëª¨ë¸ í•™ìŠµ | 1-2ì‹œê°„ |
| **3-4ë‹¨ê³„** | ì„±ëŠ¥ í‰ê°€ + ê²°ê³¼ ë¶„ì„ | 10ë¶„ |

### ğŸ”§ í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”

**ì„±ëŠ¥ë³„ ê¶Œì¥ ì„¤ì •:**

```python
# ê¸°ë³¸ ì„±ëŠ¥ (mAP 0.6-0.8)
training_config = {
    'epochs': 200,
    'lr0': 0.0001,
    'batch': 8,
    'patience': 75
}

# ê³ ê¸‰ ì„±ëŠ¥ (mAP 0.8-0.9+)  
training_config = {
    'epochs': 300,
    'lr0': 0.00005,
    'batch': 12,
    'patience': 100,
    'weight_decay': 0.0005
}
```

### ğŸ“ˆ í•™ìŠµ ëª¨ë‹ˆí„°ë§

Colabì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥í•œ ì§€í‘œ:
- **Loss ê³¡ì„ **: box_loss, cls_loss, dfl_loss
- **ì„±ëŠ¥ ì§€í‘œ**: mAP@0.5, Precision, Recall  
- **í•™ìŠµ ì§„í–‰**: GPU ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰, ë‚¨ì€ ì‹œê°„

---

## ğŸ“Š ê²°ê³¼ ì˜ˆì‹œ

### ğŸ¯ íƒì§€ ê²°ê³¼ CSV
```csv
filename,x_center,y_center,confidence,longitude,latitude
forest_01.jpg,1245.2,678.9,0.92,127.123456,37.654321
forest_01.jpg,2145.8,1023.1,0.87,127.134567,37.645432
```

### ğŸ“Š ì¶”ë¡  ì‹œê°í™” ê²°ê³¼ ë° conf ì„ê³„ê°’ ìµœì í™” ë¶€ë¶„

<img width="512" alt="ì¶”ë¡  ì‹œê°í™” ì˜ˆì‹œ" src="https://github.com/user-attachments/assets/3370d830-3b66-4d91-8965-6897b85fa86a" />
<img width="512" alt="ë”¥ëŸ¬ë‹ ì‹ ë¢°ë„ ì„ê³„ê°’" src="https://github.com/user-attachments/assets/3aeb8c9f-5da6-4f6d-81a2-9a2a409fd3a2" />

---

## ğŸ’» ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### ğŸŒ Google Colab (ê¶Œì¥)
- **ë¬´ë£Œ GPU**: T4/V100 ì‚¬ìš© ê°€ëŠ¥
- **ë©”ëª¨ë¦¬**: 12GB RAM ê¸°ë³¸ ì œê³µ
- **ì €ì¥ê³µê°„**: Google Drive ì—°ë™ (15GB ë¬´ë£Œ)
- **ë¸Œë¼ìš°ì €**: Chrome, Firefox, Safari ë“±

### ğŸ  ë¡œì»¬ í™˜ê²½ (API ì„œë²„)
- **Python**: 3.10+ 
- **ë©”ëª¨ë¦¬**: 8GB+ (ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ìš©)
- **ì €ì¥ê³µê°„**: 10GB+ ì—¬ìœ  ê³µê°„
- **GPU**: CUDA í˜¸í™˜ GPU (ì„ íƒì‚¬í•­)

---

## ğŸ’¡ FAQ

### â“ **ë©€í‹°ìŠ¤ì¼€ì¼ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ë€?**
- **GPS ë°€ë„ ë¶„ì„**: ê° í”¼í•´ëª© ì£¼ë³€ 50px ë°˜ê²½ ë‚´ GPS í¬ì¸íŠ¸ ê°œìˆ˜ ê³„ì‚°
- **ì ì‘ì  í¬ê¸°**: ë°€ë„ê°€ ë†’ìœ¼ë©´ 16px (ë°€ì§‘), ë‚®ìœ¼ë©´ 128px (ì™¸ë”´)
- **ì„±ëŠ¥ í–¥ìƒ**: ê³ ì • í¬ê¸°(32px) ëŒ€ë¹„ mAP 0.5 â†’ 0.7+ ê°œì„ 

### â“ **API ì¶”ë¡  ì„¤ì • ìµœì í™”ëŠ”?**
```python
# í˜„ì¬ ìµœì í™”ëœ ì„¤ì •
confidence = 0.16     # ë¯¼ê°í•œ íƒì§€ (ì•½í•œ ì‹ í˜¸ë„ í¬ì°©)
iou_threshold = 0.45  # ì´˜ì´˜í•œ í”¼í•´ëª©ë„ ê°œë³„ íƒì§€
```

### â“ **ë°ì´í„°ì…‹ì€ ì–´ë–»ê²Œ ì¤€ë¹„í•˜ë‚˜ìš”?**
```
1. ë©€í‹°ìŠ¤ì¼€ì¼ ë°ì´í„°ì…‹ ìƒì„± (ê° ì§€ì—­ë³„)
   â””â”€â”€ GPS ë°€ë„ ê¸°ë°˜ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤ ìë™ ìƒì„±
   
2. ë‹¤ì¤‘ ë°ì´í„°ì…‹ ë³‘í•© 
   â””â”€â”€ ì—¬ëŸ¬ ì§€ì—­ ë°ì´í„°ë¥¼ í•˜ë‚˜ë¡œ í†µí•©
   
3. ìµœì¢… ê²°ê³¼: 1,000ê°œ+ íƒ€ì¼ (ê¶Œì¥)
```

### â“ **ì„±ëŠ¥ì´ ë‚®ìœ¼ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?**
1. **ìºì‹œ ë²„ê·¸ í™•ì¸**: ê° ì§€ë„ë³„ ë…ë¦½ì  GPS ì²˜ë¦¬ ì—¬ë¶€
2. **ë” ë§ì€ ì§€ì—­**: ë‹¤ì–‘í•œ ì§€ì—­ ë°ì´í„°ì…‹ ë³‘í•© (ëª©í‘œ: 1,000ê°œ+ íƒ€ì¼)
3. **ì„¤ì • ì¡°ì •**: conf=0.16, iou=0.45ë¡œ ìµœì í™”
4. **ë©€í‹°ìŠ¤ì¼€ì¼ í™œìš©**: GPS ë°€ë„ ê¸°ë°˜ ì ì‘ì  ë°”ìš´ë”©ë°•ìŠ¤

### â“ **ìºì‹œ ë²„ê·¸ê°€ ë­”ê°€ìš”?**
- **ë¬¸ì œ**: ì²« ë²ˆì§¸ ì§€ë„ì˜ GPS ì¢Œí‘œê°€ ëª¨ë“  í›„ì† ì§€ë„ì— ì¬ì‚¬ìš©
- **ì¦ìƒ**: ëª¨ë“  ì§€ë„ì—ì„œ ë™ì¼í•œ ë¼ë²¨ ê°œìˆ˜ (170~171ê°œ)
- **í•´ê²°**: ê° ì§€ë„ ì²˜ë¦¬ ì‹œ í”½ì…€ ì¢Œí‘œ ìºì‹œ ì´ˆê¸°í™”
- **ê²°ê³¼**: ì§€ë„ë³„ ë…ë¦½ì  GPS ì²˜ë¦¬, ì˜¬ë°”ë¥¸ ë¼ë²¨ ê°œìˆ˜

### â“ **ê²°ê³¼ íŒŒì¼ì€ ì–´ë””ì— ì €ì¥ë˜ë‚˜ìš”?**
- **Colab**: Google Drive `/pinetree_scan/results/`
- **API**: `data/api_outputs/` í´ë”
  - `inference/`: íƒì§€ ê²°ê³¼ CSV, ì‹œê°í™” ì´ë¯¸ì§€
  - `tiles/`: ë©€í‹°ìŠ¤ì¼€ì¼ ë°ì´í„°ì…‹ ZIP
  - `visualizations/`: ë°”ìš´ë”©ë°•ìŠ¤ í‘œì‹œëœ ì´ë¯¸ì§€

### â“ **RAG ì±—ë´‡ì€ ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?**
1. **ì§ˆë¬¸ ì…ë ¥** â†’ FAISSê°€ 84ê°œ ì²­í¬ì—ì„œ Semantic Search
2. **ê´€ë ¨ ë¬¸ì„œ ì¶”ì¶œ** â†’ PDF/MD/CSV ì¤‘ ê°€ì¥ ê´€ë ¨ ë†’ì€ 3ê°œ ë¬¸ì„œ
3. **OpenAI í˜¸ì¶œ** â†’ GPT-4o-miniê°€ ì§€ì‹ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€ ìƒì„±
4. **ìì—°ìŠ¤ëŸ¬ìš´ ì‘ë‹µ** â†’ ì „ë¬¸ ìš©ì–´ë¥¼ ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…

**ë¹„ìš©**: GPT-4o-miniëŠ” ëŒ€í™” 1íšŒë‹¹ ì•½ **$0.001** (ë§¤ìš° ì €ë ´)

### â“ **Knowledge BaseëŠ” ì–´ë–»ê²Œ ì¶”ê°€í•˜ë‚˜ìš”?**
```bash
# knowledge_base/ í´ë”ì— íŒŒì¼ ì¶”ê°€
knowledge_base/
â”œâ”€â”€ ìƒˆë¡œìš´_ë…¼ë¬¸.pdf          # PDF ìë™ íŒŒì‹±
â”œâ”€â”€ ì¶”ê°€_ê°€ì´ë“œ.md            # Markdown íŒŒì¼
â”œâ”€â”€ ìƒˆë¡œìš´_ë°ì´í„°.csv         # CSV í‘œ ë°ì´í„°
â””â”€â”€ ì„¤ì •.json                 # JSON êµ¬ì¡°í™” ë°ì´í„°

# ì„œë²„ ì¬ì‹œì‘ ì‹œ ìë™ ë¡œë“œ
poetry run python api/run_server.py
```

---

## ğŸ”§ í™˜ê²½ ì„¤ì •

### OpenAI API í‚¤ ì„¤ì • (RAG ì±—ë´‡)

```bash
# .env íŒŒì¼ ìƒì„±
cat > .env << EOF
OPENAI_API_KEY=sk-proj-your_actual_api_key_here
OPENAI_MODEL=gpt-4o-mini
EOF
```

**API í‚¤ ë°œê¸‰**: https://platform.openai.com/api-keys

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [YOLOv11 ê³µì‹ ë¬¸ì„œ](https://docs.ultralytics.com/)
- [Google Colab ì‚¬ìš©ë²•](https://colab.research.google.com/)
- [FastAPI ê³µì‹ ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [rasterio ê³µì‹ ë¬¸ì„œ](https://rasterio.readthedocs.io/)
- [OpenAI API ë¬¸ì„œ](https://platform.openai.com/docs)
- [LangChain ê³µì‹ ë¬¸ì„œ](https://python.langchain.com/)

---
